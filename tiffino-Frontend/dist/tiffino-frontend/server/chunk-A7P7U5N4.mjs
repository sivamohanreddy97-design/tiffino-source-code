import './polyfills.server.mjs';
import{a as X}from"./chunk-XXGBF7U6.mjs";import{b as U,d as Y,f as G,n as J,o as q,q as K,u as Q}from"./chunk-VMNRQHPS.mjs";import{V as D,W}from"./chunk-VKAK7VJB.mjs";import{$a as y,Bb as L,Oa as u,Sa as m,Wa as n,X as T,Xa as t,Ya as d,bb as g,cb as w,da as _,db as F,ea as C,ec as V,fa as P,fc as z,ga as E,hc as B,ic as j,jb as i,kb as I,kc as H,lb as p,pa as N,pb as M,qb as S,rb as O,tb as k,wa as A,ya as a,yb as R,za as b}from"./chunk-GVJVC3KI.mjs";import{a as h,b as x}from"./chunk-FME56UVT.mjs";function Z(c,f){if(c&1&&(n(0,"option",17),i(1),t()),c&2){let e=f.$implicit;m("value",e.id),a(),I(e.name)}}function $(c,f){if(c&1&&(n(0,"option",27),i(1),R(2,"slice"),t()),c&2){let e=f.$implicit;m("value",e.id)("title",e.name),a(),p(" ",e.name.length>23?L(2,3,e.name,0,23)+"\u2026":e.name," ")}}function ee(c,f){if(c&1){let e=y();n(0,"div",28),d(1,"img",29),n(2,"p")(3,"strong"),i(4,"Region:"),t(),i(5),t(),n(6,"p")(7,"strong"),i(8,"State:"),t(),i(9),t(),n(10,"h2",30),i(11),t(),n(12,"p"),d(13,"i",31),n(14,"strong"),i(15,"Meal Type:"),t(),i(16),t(),n(17,"p"),d(18,"i",32),n(19,"strong"),i(20,"Calories:"),t(),i(21),t(),n(22,"p"),d(23,"i",33),n(24,"strong"),i(25,"Carbs:"),t(),i(26),t(),n(27,"p"),d(28,"i",34),n(29,"strong"),i(30,"Fats:"),t(),i(31),t(),n(32,"p"),d(33,"i",35),n(34,"strong"),i(35,"Spice Level:"),t(),i(36),t(),n(37,"p"),d(38,"i",36),n(39,"strong"),i(40,"Protein:"),t(),i(41),t(),n(42,"p"),d(43,"i",37),n(44,"strong"),i(45,"Price Per Meal:"),t(),i(46),t(),n(47,"button",38),g("click",function(){let o=_(e).$implicit,l=w();return C(l.addToCart(o))}),P(),n(48,"svg",39),d(49,"path",40),t(),i(50,"Add to Cart"),t(),E(),n(51,"button",41),g("click",function(){let o=_(e).$implicit,l=w();return C(l.navigate(o.id))}),i(52,"View Product"),t()()}if(c&2){let e=f.$implicit;a(),F("alt",e.name),m("src",e.imageUrl,A),a(4),p(" ",e.regionName,""),a(4),p(" ",e.stateName,""),a(2),I(e.name),a(5),p(" ",e.meal_type||"N/A",""),a(5),p(" ",e.calories||"N/A",""),a(5),p(" ",e.carbs||"N/A",""),a(5),p(" ",e.fats||"N/A",""),a(5),p(" ",e.spice_level||"N/A",""),a(5),p(" ",e.protein||"N/A",""),a(5),p(" \u20B9",e.price_per_meal,"")}}function te(c,f){if(c&1){let e=y();n(0,"div",42)(1,"span"),i(2,"Item added to cart!"),t(),n(3,"a",43),P(),n(4,"svg",44),d(5,"path",45),t(),i(6,"View Cart"),t(),E(),n(7,"span",46),g("click",function(){_(e);let o=w();return C(o.showPopup=!1)}),i(8,"\xD7"),t()()}}var ge=(()=>{class c{constructor(e,r,o){this.cs=e,this.route=r,this.platformId=o,this.regions=[],this.states=[],this.cusines=[],this.allCuisines=[],this.selectedRegionId=null,this.selectedStateId=null,this.showPopup=!1,this.isFilterOpen=!1,this.searchTerm="",this.isBrowser=H(this.platformId)}ngOnInit(){if(this.isBrowser){let e=localStorage.getItem("user");if(e)try{let r=JSON.parse(e);this.userId=r?.id||r?.user?.id}catch(r){console.error("Error parsing localStorage user:",r)}}this.getRegions(),this.cs.getAllRegions().subscribe(e=>{this.regions=e,this.cs.getAllStates().subscribe(r=>{this.states=r,console.log(r),this.loadCuisines()})})}loadCuisines(){this.cs.allcusines().subscribe(e=>{this.allCuisines=e.map(r=>{let o=this.states.find(s=>s.id===r.stateId),l=o?this.regions.find(s=>s.id===o.regionId):null;return x(h({},r),{stateName:o?.name||"N/A",regionName:l?.name||"N/A"})}),this.cusines=this.allCuisines})}getRegions(){this.cs.getAllRegions().subscribe(e=>{this.regions=e})}onRegionChange(){this.states=[],this.selectedStateId=null,this.selectedRegionId&&this.cs.getStatesByRegion(this.selectedRegionId).subscribe(e=>{this.states=e;let r=this.allCuisines.filter(o=>o.regionId===this.selectedRegionId);this.cusines=r.map(o=>{let l=this.states.find(v=>v.id===o.stateId),s=this.regions.find(v=>v.id===o.regionId);return x(h({},o),{stateName:l?.name||"N/A",regionName:s?.name||"N/A"})})})}onStateChange(){this.selectedStateId&&this.cs.getCuisinesByState(this.selectedStateId).subscribe(e=>{console.log(e),this.cusines=e.map(r=>{let o=this.states.find(s=>s.id===r.stateId),l=this.regions.find(s=>s.id===o?.regionId);return x(h({},r),{stateName:o?.name||"N/A",regionName:l?.name||"N/A"})})})}applySearch(){let e=this.searchTerm.toLowerCase();this.cusines=this.allCuisines.filter(r=>r.name.toLowerCase().includes(e)||r.stateName.toLowerCase().includes(e)||r.meal_type.toLowerCase().includes(e)||r.regionName.toLowerCase().includes(e)||r.regionName.toLowerCase().includes(e))}clearFilter(){this.selectedRegionId=null,this.selectedStateId=null,this.cusines=this.allCuisines}navigate(e){this.route.navigate(["/cusineinfo",e])}addToCart(e){let r=e.id;this.cs.addToCart(this.userId,r,1).subscribe({next:()=>{this.showPopup=!0,this.cs.updateCartLengthFromServer(this.userId)},error:()=>{alert("Failed to add item")}})}static{this.\u0275fac=function(r){return new(r||c)(b(X),b(D),b(N))}}static{this.\u0275cmp=T({type:c,selectors:[["app-order-tracking"]],standalone:!0,features:[k],decls:51,vars:9,consts:[[1,"card-container","mt-4","rounded-3"],[1,"offer-card"],[1,"sub"],[1,"offer"],["src","https://cdn-icons-png.flaticon.com/512/3075/3075977.png","alt","food",1,"card-img"],["src","https://cdn-icons-png.flaticon.com/512/590/590685.png","alt","grocery",1,"card-img"],["src","https://cdn-icons-png.flaticon.com/512/4780/4780045.png","alt","dine",1,"card-img",2,"width","250px","border-radius","60px"],[1,"controls","mt-4"],[1,"search-wrapper"],[1,"bi","bi-search","search-icon"],["type","text","placeholder","Search cuisine or state .....",3,"ngModelChange","input","ngModel"],[1,"page-layout"],[1,"filter-card"],[1,"card","shadow-sm","p-3","bg-white","rounded","border","border-3",2,"width","100%"],[1,"card-body"],[1,"card-title","mt-2"],[1,"form-select","w-100","mb-3",3,"ngModelChange","change","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"card-title"],[1,"form-select","mb-3","state-select",3,"ngModelChange","change","ngModel"],[3,"value","title",4,"ngFor","ngForOf"],[1,"btn","btn-outline-danger","mt-3","w-100",3,"click"],[1,"meal-container"],[1,"meal_type"],["class","meal-card",4,"ngFor","ngForOf"],["class","popup",4,"ngIf"],[3,"value","title"],[1,"meal-card"],[3,"src","alt"],[1,"title"],[1,"bi","bi-list-ul"],[1,"bi","bi-fire"],[1,"bi","bi-battery-half"],[1,"bi","bi-droplet"],[1,"bi","bi-thermometer"],[1,"bi","bi-weight","me-3","text-secondary"],[1,"me-3","text-secondary"],[1,"btn","btn-success","fs-7",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","18","fill","black","viewBox","0 0 16 16",1,"bi","bi-cart-plus-fill"],["d","M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0M9 5.5V7h1.5a.5.5 0 0 1 0 1H9v1.5a.5.5 0 0 1-1 0V8H6.5a.5.5 0 0 1 0-1H8V5.5a.5.5 0 0 1 1 0"],[1,"ms-3","me-3","viewcart","fs-6",2,"margin-top","10px","height","33px",3,"click"],[1,"popup"],["routerLink","/addtocart",1,"viewcart"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cart"],["d","M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"],[1,"close-icon",3,"click"]],template:function(r,o){r&1&&(n(0,"div",0)(1,"div",1)(2,"h3"),i(3,"FOOD DELIVERY"),t(),n(4,"p",2),i(5,"FROM RESTAURANTS"),t(),n(6,"span",3),i(7,"UPTO 60% OFF"),t(),d(8,"img",4),t(),n(9,"div",1)(10,"h3"),i(11,"INSTANT DELIVERY"),t(),n(12,"p",2),i(13,"INSTANT DELIVERY"),t(),n(14,"span",3),i(15,"UPTO 60% OFF"),t(),d(16,"img",5),t(),n(17,"div",1)(18,"h3"),i(19,"DINEOUT"),t(),n(20,"p",2),i(21,"EAT OUT & SAVE MORE"),t(),n(22,"span",3),i(23,"UPTO 50% OFF"),t(),d(24,"img",6),t()(),n(25,"div",7)(26,"div",8),d(27,"i",9),n(28,"input",10),O("ngModelChange",function(s){return S(o.searchTerm,s)||(o.searchTerm=s),s}),g("input",function(){return o.applySearch()}),t()()(),n(29,"div",11)(30,"div",12)(31,"div",13)(32,"div",14)(33,"h5",15),i(34,"Filter by Region"),t(),n(35,"select",16),O("ngModelChange",function(s){return S(o.selectedRegionId,s)||(o.selectedRegionId=s),s}),g("change",function(){return o.onRegionChange()}),n(36,"option",17),i(37,"-- Select Region --"),t(),u(38,Z,2,2,"option",18),t(),n(39,"h5",19),i(40,"Filter by state"),t(),n(41,"select",20),O("ngModelChange",function(s){return S(o.selectedStateId,s)||(o.selectedStateId=s),s}),g("change",function(){return o.onStateChange()}),n(42,"option",17),i(43,"-- Select State --"),t(),u(44,$,3,7,"option",21),t(),n(45,"button",22),g("click",function(){return o.clearFilter()}),i(46,"Clear Filters"),t()()()(),n(47,"div",23)(48,"div",24),u(49,ee,53,12,"div",25),t()()(),u(50,te,9,0,"div",26)),r&2&&(a(28),M("ngModel",o.searchTerm),a(7),M("ngModel",o.selectedRegionId),a(),m("value",null),a(2),m("ngForOf",o.regions),a(3),M("ngModel",o.selectedStateId),a(),m("value",null),a(2),m("ngForOf",o.states),a(5),m("ngForOf",o.cusines),a(),m("ngIf",o.showPopup))},dependencies:[j,V,z,B,Q,q,K,U,J,Y,G,W],styles:[".controls[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-bottom:15px;margin-left:400px}.search-wrapper[_ngcontent-%COMP%]{position:relative;width:50%;transition:transform .25s ease}.search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 14px 10px 38px;border:1px solid #e0e0e0;border-radius:6px;font-size:14px;transition:border-color .2s,box-shadow .2s}.search-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00a86b;box-shadow:0 0 6px #00a86b4d}.search-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:12px;transform:translateY(-50%);font-size:16px;color:#888}.search-wrapper[_ngcontent-%COMP%]:focus-within{transform:scale(1.03)}.popup[_ngcontent-%COMP%]{position:fixed;bottom:100px;right:300px;background:#2ecc71;color:#fff;padding:12px 18px;border-radius:6px}.popup[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;margin-left:8px}.offcanvas.open[_ngcontent-%COMP%]{right:0}.filter-buttons[_ngcontent-%COMP%]{margin-top:20px;display:flex;gap:10px}.meal_type[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:20px}.meal-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:12px;box-shadow:0 2px 6px #0000001a;text-align:left}.meal-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:160px;object-fit:cover;border-radius:6px;margin-bottom:8px}.meal-card[_ngcontent-%COMP%]   .viewcart[_ngcontent-%COMP%]{margin-top:6px;padding:6px 12px;border:none;background:#ff6f00;color:#fff;border-radius:4px;cursor:pointer}.btn[_ngcontent-%COMP%]{margin-top:4px;padding:6px 12px;border:none;color:#fff;border-radius:4px;cursor:pointer}.offcanvas[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;margin-bottom:12px;background:#2d2d2d;border:1px solid #444;color:#fff;border-radius:4px}.filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:8px;border:none;border-radius:4px;cursor:pointer}.filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background:#555;color:#fff}.filter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background:#00b36b;color:#fff}[_nghost-%COMP%]{display:block;width:100vw;margin:0;padding:0}#carouselExampleAutoplaying[_ngcontent-%COMP%]{width:100%}.carousel-img[_ngcontent-%COMP%]{height:300px;object-fit:cover}.carousel-img[_ngcontent-%COMP%]{height:300px;object-fit:cover;border-radius:40px}@media (max-width: 768px){.carousel-img[_ngcontent-%COMP%]{height:200px}}.card-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;background-color:#ff6200;padding:40px 20px;flex-wrap:wrap;gap:20px}.offer-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:50px;padding:16px;width:280px;text-align:left;position:relative;box-shadow:0 4px 12px #0000001a;transition:transform .3s ease}.offer-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px}.offer-card[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:8px}.offer-card[_ngcontent-%COMP%]   .offer[_ngcontent-%COMP%]{font-size:1.2rem;color:#ff6200;margin-bottom:12px}.offer-card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{max-height:100px;margin-bottom:16px}.offer-card[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{position:absolute;bottom:16px;right:16px;font-size:1.5rem;color:#ff6200}.card[_ngcontent-%COMP%]{border:none;transition:transform .2s ease-in-out}.card[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.card-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600}.badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.4em .6em}.card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500}.form-check-label[_ngcontent-%COMP%]{margin-left:.5em}.page-layout[_ngcontent-%COMP%]{display:flex;gap:20px;width:100%}.filter-card[_ngcontent-%COMP%]{width:250px;flex-shrink:0}.meal-container[_ngcontent-%COMP%]{flex:1}.popup[_ngcontent-%COMP%]{width:1200px;height:70px;display:flex;align-items:center;justify-content:space-between;padding:0 20px;position:fixed;bottom:100px;right:220px;background:#28a745;color:#000;border-radius:6px;box-shadow:0 3px 8px #0003;z-index:1000}.close-icon[_ngcontent-%COMP%]{cursor:pointer;font-size:20px;font-weight:600;margin-left:20px}.viewcart[_ngcontent-%COMP%]{font-size:25px;font-weight:400;color:#050505;text-decoration:none;padding:6px 12px;border-radius:20px;margin-left:820px}.state-select[_ngcontent-%COMP%]{width:180px;padding:6px 8px;display:inline-block;font-size:16px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.state-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{font-size:14px;white-space:nowrap;overflow-y:scroll;overflow-x:scroll;text-overflow:ellipsis;margin-right:10px}"]})}}return c})();export{ge as CusinefilterComponent};
